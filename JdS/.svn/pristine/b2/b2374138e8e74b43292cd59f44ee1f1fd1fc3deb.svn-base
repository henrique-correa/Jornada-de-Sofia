using UnityEngine;
using System.Collections;

public class hiena : MonoBehaviour {
	RaycastHit2D hit;
	RaycastHit2D hit2;
	int raiolayer;
	Vector2 tiro;
	Vector2 tiro2;
	//bool pode_atirar = true;
	GameObject ris;
	Vector2 vel_tiro;
	Vector2 vel_tiro2;
	float proximo_tiro = 0.0f;
	[SerializeField]float tiro_rate = 50.0f;

	// Use this for initialization
	void Start () {
		tiro = transform.position;
		tiro.x -= 0.5f;
		tiro2 = transform.position;
		tiro2.x += 0.5f;
		vel_tiro.x = -10.0f;
		vel_tiro.y = 0.0f;
		vel_tiro2.x = 10.0f;
		vel_tiro2.y = 0.0f;
	
		raiolayer = 1 << 8;
	}
	
	// Update is called once per frame
	void Update () {
		hit = Physics2D.Raycast(transform.position,-Vector2.right,5.0f,raiolayer);
		hit2 = Physics2D.Raycast(transform.position,Vector2.right,5.0f,raiolayer);
		
		
		//Debug.Log (hit.ToString());
		//nome = hit.ToString();
		if (hit.collider != null){
			Debug.Log ("inimigo ve o player");
			if(Time.time > proximo_tiro){
				proximo_tiro = Time.time + tiro_rate;
			ris = Instantiate(Resources.Load("risada"),tiro,Quaternion.identity) as GameObject;
				//ris.rigidbody2D.AddRelativeForce(vel_tiro);
				ris.gameObject.rigidbody2D.AddRelativeForce(vel_tiro);


				//pode_atirar = false;
			}

		}
		if (hit2.collider != null){
			Debug.Log ("inimigo ve o player");
			if(Time.time > proximo_tiro){
				proximo_tiro = Time.time + tiro_rate;
				ris = Instantiate(Resources.Load("risada"),tiro2,Quaternion.identity) as GameObject;
				//ris.rigidbody2D.AddRelativeForce(vel_tiro);
				ris.gameObject.rigidbody2D.AddRelativeForce(vel_tiro2);
				
				
				//pode_atirar = false;
			}
			
		}
	
	}
}
